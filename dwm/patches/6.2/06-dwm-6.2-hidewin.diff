--- dwm.c.orig	Sun Dec 20 16:57:20 2020
+++ dwm.c	Sun Dec 20 18:22:58 2020
@@ -49,12 +49,13 @@
 #define CLEANMASK(mask)         (mask & ~(numlockmask|LockMask) & (ShiftMask|ControlMask|Mod1Mask|Mod2Mask|Mod3Mask|Mod4Mask|Mod5Mask))
 #define INTERSECT(x,y,w,h,m)    (MAX(0, MIN((x)+(w),(m)->wx+(m)->ww) - MAX((x),(m)->wx)) \
                                * MAX(0, MIN((y)+(h),(m)->wy+(m)->wh) - MAX((y),(m)->wy)))
-#define ISVISIBLE(C)            ((C->tags & C->mon->tagset[C->mon->seltags]))
 #define LENGTH(X)               (sizeof X / sizeof X[0])
 #define MOUSEMASK               (BUTTONMASK|PointerMotionMask)
 #define WIDTH(X)                ((X)->w + 2 * (X)->bw)
 #define HEIGHT(X)               ((X)->h + 2 * (X)->bw)
 #define TAGMASK                 ((1 << LENGTH(tags)) - 1)
+#define HIDDENTAG               (TAGMASK + 1)
+#define ISVISIBLE(C)            (!(C->tags & HIDDENTAG) && (C->tags & C->mon->tagset[C->mon->seltags]))
 #define TEXTW(X)                (drw_fontset_getwidth(drw, (X)) + lrpad)
 
 #define SYSTEM_TRAY_REQUEST_DOCK    0
@@ -271,6 +272,7 @@
 static void bstack(Monitor *m);
 static void switchstextvis(const Arg *arg);
 static void updatewmdesktop(Client *c);
+static void hide(const Arg *arg);
 
 
 /* variables */
@@ -621,6 +623,11 @@
 			setfullscreen(c, (cme->data.l[0] == 1 /* _NET_WM_STATE_ADD    */
 				|| (cme->data.l[0] == 2 /* _NET_WM_STATE_TOGGLE */ && !c->isfullscreen)));
 	} else if (cme->message_type == netatom[NetActiveWindow]) {
+		if (c->tags & HIDDENTAG) {
+			setclientstate(c, NormalState);
+			c->tags &= ~HIDDENTAG;
+			arrange(c->mon);
+		}
 		for (i = 0; i < LENGTH(tags) && !((1 << i) & c->tags); i++);
 		if (i < LENGTH(tags)) {
 			selmon = c->mon;
@@ -2585,6 +2592,15 @@
 	unsigned int data[] = { c->tags };
 	XChangeProperty(dpy, c->win, netatom[NetWMDesktop], XA_CARDINAL, 32,
 		PropModeReplace, (unsigned char*)data, 1);
+}
+
+void
+hide(const Arg *arg)
+{
+	selmon->sel->tags |= HIDDENTAG;
+	setclientstate(selmon->sel, IconicState);
+	focus(NULL);
+	arrange(selmon);
 }
 
 int
